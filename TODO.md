# URGENT #
## vm/internal/simul\_efun.cc ##
- init\_simul\_efun

    ~~possible overflow in strcat(buf, ".c") change to strncat!!!~~  
    ~~search complete source for other occurances~~  
    Doesn't apply anymore after changing to std::string
- portability problems

    add gnulib modules

# Major #
## complete source ##
- check for package dependencies

    e.g. vm/internal/base/object.cc depends on package/compress enabled!
- substitute struct svalue\_t by class and provide proper API
- check all string handling for utf-8 conformity

## packages/core/ed.cc ##
- missing 'check\_valid\_path(...)' for write operation with new api.
- needs probably rewrite (from first look not reentrant!)
- doesn't compile with ```#define RECEIVE_ED``` (for how long?)

## packages/core/sprintf.cc ##
- reimplement using std::string

## efun::\*, compiler & vm ##
- change efun::\* signature from  
    - 'void -> void'

    to
    - 'LPC_stack -> void'

    with some to be defined ```class LPC_stack```, providing a multi instance
    capable stack for the virtual machine.
- finalize svalue_t API

## vm & compiler ##
- encapsulate vm/interpreter and compiler in distinct, multi instance capable
  classes.
- make sure variadic efuns get the number of parameters they are called with either
    - on the stack

    or
    - as argument

# Minor #
## documentation ##
- complete docs/efun/contrib [packages/contrib]
- check efun::shadowp/efun::query_shadowing
- expand docs for efun:implode (missing three arg form)
- missing docs for efun::defer
- missing docs for iconv-efuns

## base/internal/log.cc
- use STL container for 'debug_levels'

## base/internal/log.h
- \#define debug(...) still uses char\*

## base/internal/outbuf.cc ##
- change ```struct outbuf_t``` into class with full API

## packages/core/crc32.cc ##
- switch to CRCpp (see: [github repo](https://github.com/Shea690901/CRCpp "forked from d-bahr/CRCpp"))
- also add additional hashes (sha, blowfish, ...) (rename file or expand using own package?)

## packages/core/dns.cc ##
- rewrite
    - change storage class
    - change storage handling

## packages/contrib/contrib.cc ##
- network\_stats
    - make maximum number of ports configurable?
        - if yes look for possible buffer overflows!!!

- query\_num
    - rework code? uses goto

- string\_difference
    - rename? there are different kind of string differences...

## packages/core/efun_main.cc ##
- reimplement:
    - ```efun::process_string(string)```
    - ```efun::process_value(string)```
- switch to std::regexp

## packages/core/file.cc ##
- add support for 'lstat' if available
    - efun::get\_dir
    - efun::file\_size
    - efun::stat / new efun::lstat ?
- remove master::valid\_link ?

    efun::link internally uses efun::rename with it's inherit security checks
    against master::valid\_write making either double checks or reducing
    master::valid\_link to a simple switch: mudlib _generally_ allows / forbids
    linking
- alternative:

    remove dependency on efun::rename from efun::link and correctly support
    links within all relevant functions

## path handling ##
- simplify handling of paths:

    There are dozends of places where paths are brought into some canonical
    form.  
    Make sure each supplied path, either by mudlib, runtime configuration or
    generated by the driver itself, IS canonical and work from there...

## vm/internal/simulate.cc ##
- give_uid_to_object
    after calling master::creator_file doubled check for ```!ret```.

## iconv ##
- provide (MT safe) c++ wrapper

# after switch to C++17 (or later) ##
- check all attributes
    - e.g.: C++17 knows ```[[fallthrough]]``` as such occurences of
      ```[[gnu::fallthrogh]]``` may be deleted/replaced.
